<% media.forEach(m => { %>
    <% if (m.type == 'video' || m.type == 'animated_gif') { %>
    <% 
        const variants = m.video_info.variants;
        if (variants.length != 0) {
    %>
    <video width="340" poster="<%= m.media_url_https %>" muted controls preload="none">
    <%
        variants.filter((video, index, array) => { return video.content_type.startsWith("video"); }).forEach((video, index, array) => {
    %>
    <source src="<%= video.url %>" type="<%= video.content_type %>"/>
    <%
        })
    %>
    </video>
    <% } %>
    <% } else { %>
    <%- include('linkbutton', {title: 'Click to view larger image', text: '<img style="border-radius:10px;" src="' + m.media_url_https + (quoted ? ':thumb' : ':thumb') + '"/>', msg: {cmd: 'image', args: {src: m.media_url_https + ':large'}}}); -%>
    <% } %>
<% },) %>
